{% assign current_collection = page.collection | default: page.nav_collection %}
{% assign nav_file = "nav_" | append: current_collection %}

<div class="sidebar">
    {% if current_collection and site.data[nav_file] %}
    <a id="back-button" href="{{ site.baseurl }}/index.html">⬅ Zurück</a>
    <img src="/assets/images/doc-logos/{{ current_collection }}.png" class="navbar_logo" id="navbar_logo_{{ page.collection }}">
        {% for item in site.data[nav_file] %}

            <!-- display group -->
            {% if item.group %}
                <h2 class="group-title">{{ item.group }}</h2>
                {% for group_item in item.pages %}
                    <a href="{{ site.baseurl }}/{{ current_collection }}/{{ group_item.url }}" class="nav-link">
                        {{ group_item.title }}
                    </a>
                    {% if group_item.subpages %}
                        <div class="subpages">
                            {% for subitem in group_item.subpages %}
                                <a href="{{ site.baseurl }}/{{ current_collection }}/{{ subitem.url }}" class="nav-link subpage">
                                    {{ subitem.title }}
                                </a>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endfor %}
            
            <!-- display ungrouped page -->
            {% else %}
                <a href="{{ site.baseurl }}/{{ current_collection }}/{{ item.url }}" class="nav-link">
                    {{ item.title }}
                </a>
                {% if item.subpages %}
                    <div class="subpages">
                        {% for subitem in item.subpages %}
                            <a href="{{ site.baseurl }}/{{ current_collection }}/{{ subitem.url }}" class="nav-link subpage">
                                {{ subitem.title }}
                            </a>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endif %}

        {% endfor %}
    {% endif %}
</div>

<!-- original sidebar code:

<div class="sidebar">
    <h2 class="group-title">Gruppe 1</h2>
    <a href="#" class="nav-link active"><span class="icon">🏠</span> Seite 1</a>
    <a href="#" class="nav-link"><span class="icon">📄</span> Seite 2</a>
    <div class="subpages">
        <a href="#" class="nav-link subpage"><span class="icon">📑</span> Unterseite 2.1</a>
        <a href="#" class="nav-link subpage"><span class="icon">📑</span> Unterseite 2.2</a>
    </div>

    <h2 class="group-title">Gruppe 2</h2>
    <a href="#" class="nav-link"><span class="icon">📄</span> Seite 3</a>
    <div class="subpages">
        <a href="#" class="nav-link subpage"><span class="icon">📑</span> Unterseite 3.1</a>
        <a href="#" class="nav-link subpage"><span class="icon">📑</span> Unterseite 3.2</a>
    </div>
</div>

-->
